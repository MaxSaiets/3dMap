# –ö—Ä–∏—Ç–∏—á–Ω—ñ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –æ–±—Ä–æ–±–∫–∏ –¥–æ—Ä—ñ–≥

## –ê–Ω–∞–ª—ñ–∑ –ø—Ä–æ–±–ª–µ–º

### 1. üî¥ –†–æ–∑—Ä–∏–≤–∏ —Ç–∞ —â—ñ–ª–∏–Ω–∏ –≤ –¥–æ—Ä–æ–≥–∞—Ö

**–°–∏–º–ø—Ç–æ–º:**
- –î–æ—Ä–æ–≥–∞ —Ä–æ–∑—Ä–∏–≤–∞—î—Ç—å—Å—è –Ω–∞ —à–º–∞—Ç–∫–∏
- –í–∏—Å–æ—Ç–∞ —Å–µ–≥–º–µ–Ω—Ç—ñ–≤ –Ω–µ —Å–ø—ñ–≤–ø–∞–¥–∞—î –Ω–∞ —Å—Ç–∏–∫–∞—Ö
- –í–∏–¥–Ω–æ –Ω–∞ —Ñ–æ—Ç–æ: `image_d241eb.png`, `image_165a29.png`

**–ü—Ä–∏—á–∏–Ω–∞ (–ö–†–ò–¢–ò–ß–ù–ê):**
- –§—É–Ω–∫—Ü—ñ—è `_process_one` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–ª–∞ `adaptive_embed` (–∞–¥–∞–ø—Ç–∏–≤–Ω–µ –∑–∞–≥–ª–∏–±–ª–µ–Ω–Ω—è)
- `adaptive_embed` —Ä–æ–∑—Ä–∞—Ö–æ–≤—É–≤–∞–≤—Å—è –Ω–∞ –æ—Å–Ω–æ–≤—ñ min/max –≤–∏—Å–æ—Ç–∏ —Ä–µ–ª—å—î—Ñ—É –ø—ñ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–º —à–º–∞—Ç–∫–æ–º –ø–æ–ª—ñ–≥–æ–Ω—É
- **–ú–µ—Ö–∞–Ω—ñ–∫–∞ –ø–æ–º–∏–ª–∫–∏:**
  - –î–æ—Ä–æ–≥–∞ —Ä–æ–∑—Ä—ñ–∑–∞—î—Ç—å—Å—è –Ω–∞ —á–∞—Å—Ç–∏–Ω—É –ê (–∑–≤–∏—á–∞–π–Ω—É) —ñ —á–∞—Å—Ç–∏–Ω—É –ë (–º—ñ—Å—Ç)
  - –ß–∞—Å—Ç–∏–Ω–∞ –ê –ª–µ–∂–∏—Ç—å –Ω–∞ —Ä—ñ–≤–Ω–∏–Ω—ñ ‚Üí `slope` –º–∞–ª–∏–π ‚Üí `adaptive_embed = 0.5–º`
  - –ß–∞—Å—Ç–∏–Ω–∞ –ë (–ø–æ—á–∞—Ç–æ–∫ –º–æ—Å—Ç—É) –ª–µ–∂–∏—Ç—å –Ω–∞ —Å—Ö–∏–ª—ñ ‚Üí `slope` –≤–µ–ª–∏–∫–∏–π ‚Üí `adaptive_embed = 0.1–º`
  - **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–∞ —Å—Ç–∏–∫—É –∑'—è–≤–ª—è—î—Ç—å—Å—è —Å—Ö–æ–¥–∏–Ω–∫–∞ —É 0.4–º. –¶–µ —ñ —î —Ä–æ–∑—Ä–∏–≤–∏.

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**
```python
# –ë–£–õ–û (–í–∏–∫–ª–∏–∫–∞—î —Ä–æ–∑—Ä–∏–≤–∏):
min_ground_z = float(np.min(ground_z_values))
max_ground_z = float(np.max(ground_z_values))
slope = max_ground_z - min_ground_z
adaptive_embed = float(re)
if slope > float(re) * 2.0:
    adaptive_embed = float(re) * (1.0 - min(0.5, (slope - float(re) * 2.0) / (slope + 1.0)))
road_z = ground_z_values + old_z - adaptive_embed

# –°–¢–ê–õ–û (–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ):
stable_embed = float(re) if float(re) > 0 else 0.1
bias = 0.02  # 2 —Å–º –¥–ª—è —É–Ω–∏–∫–Ω–µ–Ω–Ω—è z-fighting
road_z = ground_z_values + old_z - stable_embed + bias
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –í—Å—ñ —á–∞—Å—Ç–∏–Ω–∏ –¥–æ—Ä–æ–≥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –æ–¥–Ω–∞–∫–æ–≤–µ –∑–∞–≥–ª–∏–±–ª–µ–Ω–Ω—è
- ‚úÖ –°—Ç–∏–∫–∏ –º—ñ–∂ —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏ —ñ–¥–µ–∞–ª—å–Ω—ñ –±–µ–∑ —Ä–æ–∑—Ä–∏–≤—ñ–≤
- ‚úÖ –î–æ—Ä–æ–≥–∏ –≤–∏–≥–ª—è–¥–∞—é—Ç—å —è–∫ —Ü—ñ–ª—å–Ω—ñ —Å—Ç—Ä—ñ—á–∫–∏

---

### 2. üî¥ –ß–æ—Ä–Ω—ñ –±–ª–æ–∫–∏ –Ω–∞ –ø–µ—Ä–µ—Ö—Ä–µ—Å—Ç—è—Ö

**–°–∏–º–ø—Ç–æ–º:**
- –ú–∞—Å–∏–≤–Ω—ñ —á–æ—Ä–Ω—ñ –ø–∞—Ä–∞–ª–µ–ª–µ–ø—ñ–ø–µ–¥–∏, —â–æ –ø–µ—Ä–µ–∫—Ä–∏–≤–∞—é—Ç—å –¥–æ—Ä–æ–≥—É
- –í–∏–¥–Ω–æ –Ω–∞ —Ñ–æ—Ç–æ: `image_16575d.png`

**–ü—Ä–∏—á–∏–Ω–∞:**
- –¶–µ –æ–ø–æ—Ä–∏ –º–æ—Å—Ç—ñ–≤ (`create_bridge_supports`)
- –§—É–Ω–∫—Ü—ñ—è `detect_bridges` —Å–ø—Ä–∞—Ü—å–æ–≤—É—î –∑–∞–Ω–∞–¥—Ç–æ –∞–≥—Ä–µ—Å–∏–≤–Ω–æ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —á–µ—Ä–µ–∑ —Ç–µ–≥ `layer=1` –Ω–∞ —Ä–æ–∑–≤'—è–∑–∫–∞—Ö)
- –í–æ–Ω–∞ –≤–≤–∞–∂–∞—î –ø–µ—Ä–µ—Ö—Ä–µ—Å—Ç—è –º–æ—Å—Ç–æ–º —ñ –≥–µ–Ω–µ—Ä—É—î –ø—ñ–¥ –Ω–∏–º –æ–ø–æ—Ä–∏
- –û—Å–∫—ñ–ª—å–∫–∏ –≤–∏—Å–æ—Ç–∞ –Ω–µ–≤–µ–ª–∏–∫–∞, –æ–ø–æ—Ä–∏ —Å—Ç–∏—Ä—á–∞—Ç—å –∫—Ä—ñ–∑—å –Ω–∏–∂–Ω—é –¥–æ—Ä–æ–≥—É

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**

**1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∏—Å–æ—Ç–∏ –æ–ø–æ—Ä:**
```python
# –î–û–î–ê–ù–û: –Ü–≥–Ω–æ—Ä—É—î–º–æ –Ω–∞–¥—Ç–æ –∫–æ—Ä–æ—Ç–∫—ñ –æ–ø–æ—Ä–∏ (—Å–º—ñ—Ç—Ç—è –Ω–∞ –¥–æ—Ä–æ–≥–∞—Ö)
support_height = bridge_height - support_base_z

# –Ø–∫—â–æ –≤–∏—Å–æ—Ç–∞ –º–µ–Ω—à–µ 3–º, –æ–ø–æ—Ä–∞ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–∞ (—Ü–µ —Ä–∞–º–ø–∞ –∞–±–æ –Ω–∏–∑—å–∫–∞ –¥–æ—Ä–æ–≥–∞)
if support_height < 3.0:
    continue
```

**2. –ú–µ–Ω—à –∞–≥—Ä–µ—Å–∏–≤–Ω–∞ –¥–µ—Ç–µ–∫—Ü—ñ—è –º–æ—Å—Ç—ñ–≤:**
```python
# –ë–£–õ–û:
if layer is not None and layer >= 1.0:
    is_bridge = True

# –°–¢–ê–õ–û:
# –¢—ñ–ª—å–∫–∏ layer 2+ –≤–≤–∞–∂–∞—î–º–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –º–æ—Å—Ç–æ–º –±–µ–∑ –≤–æ–¥–∏
if layer is not None and layer >= 2.0:
    is_bridge = True
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –û–ø–æ—Ä–∏ –Ω–µ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –¥–ª—è –Ω–∏–∑—å–∫–∏—Ö –º–æ—Å—Ç—ñ–≤/—Ä–∞–º–ø (< 3–º)
- ‚úÖ –ü–µ—Ä–µ—Ö—Ä–µ—Å—Ç—è –Ω–µ –≤–≤–∞–∂–∞—é—Ç—å—Å—è –º–æ—Å—Ç–∞–º–∏ (layer=1 —ñ–≥–Ω–æ—Ä—É—î—Ç—å—Å—è)
- ‚úÖ –ß–æ—Ä–Ω—ñ –±–ª–æ–∫–∏ –∑–Ω–∏–∫–ª–∏ –∑ –ø–µ—Ä–µ—Ö—Ä–µ—Å—Ç—å

---

### 3. üî¥ "–†–≤–∞–Ω—ñ" –∫—Ä–∞—ó –¥–æ—Ä—ñ–≥

**–ü—Ä–∏—á–∏–Ω–∞:**
- `unary_union` –º–æ–∂–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω—É —Ç–æ–ø–æ–ª–æ–≥—ñ—é
- –ü–æ–¥–∞–ª—å—à–∞ —Ç–µ—Å–µ–ª—è—Ü—ñ—è (extrude) –±–µ–∑ –∑–≥–ª–∞–¥–∂—É–≤–∞–Ω–Ω—è –¥–∞—î –≥–æ—Å—Ç—Ä—ñ –∫—É—Ç–∏

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `stable_embed` –∑–∞–º—ñ—Å—Ç—å `adaptive_embed` —É—Å—É–≤–∞—î —Ä—ñ–∑–Ω—ñ –≤–∏—Å–æ—Ç–∏ –Ω–∞ —Å—Ç–∏–∫–∞—Ö
- –î–æ–¥–∞–≤–∞–Ω–Ω—è `bias = 0.02–º` –∑–∞–±–µ–∑–ø–µ—á—É—î –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –∑–∞–∑–æ—Ä –Ω–∞–¥ –∑–µ–º–ª–µ—é

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ö—Ä–∞—ó –¥–æ—Ä—ñ–≥ –≤–∏–≥–ª—è–¥–∞—é—Ç—å —Ä—ñ–≤–Ω–∏–º–∏
- ‚úÖ –ù–µ–º–∞—î –≥–æ—Å—Ç—Ä–∏—Ö –∫—É—Ç—ñ–≤ –Ω–∞ —Å—Ç–∏–∫–∞—Ö

---

### 4. ‚ö†Ô∏è Z-Fighting –Ω–∞ —Å—Ç–∏–∫–∞—Ö –∑ —Ç—Ä–∞–≤–æ—é

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –î–æ—Ä–æ–≥–∏ —ñ–Ω–æ–¥—ñ –∑–ª–∏–≤–∞—é—Ç—å—Å—è –∑ —Ç—Ä–∞–≤–æ—é
- –ú–æ–∂–ª–∏–≤—ñ –º—ñ–∫—Ä–æ-—â—ñ–ª–∏–Ω–∏ —á–µ—Ä–µ–∑ –ø–æ—Ö–∏–±–∫–∏ —Å–ª–∞–π—Å–µ—Ä–∞

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**
```python
# bias –ø—ñ–¥–Ω—ñ–º–∞—î –¥–æ—Ä–æ–≥—É –Ω–∞ 2—Å–º –Ω–∞–¥ –∑–µ–º–ª–µ—é, —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ñ–≤ –Ω–∞ —Å—Ç–∏–∫–∞—Ö –∑ —Ç—Ä–∞–≤–æ—é
bias = 0.02  # 2 —Å–º –¥–ª—è —É–Ω–∏–∫–Ω–µ–Ω–Ω—è z-fighting
road_z = ground_z_values + old_z - stable_embed + bias
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –î–æ—Ä–æ–≥–∏ –∑–∞–≤–∂–¥–∏ —Ç—Ä–æ—Ö–∏ –≤–∏—â—ñ –∑–∞ –∑–µ–º–ª—é (2—Å–º)
- ‚úÖ –£–Ω–∏–∫–∞—î–º–æ z-fighting –Ω–∞ —Å—Ç–∏–∫—É –∑ —Ç—Ä–∞–≤–æ—é
- ‚úÖ –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π offset, —â–æ–± –Ω–µ –±—É–ª–æ –≤–∏–¥–∏–º–æ—ó —Ä—ñ–∑–Ω–∏—Ü—ñ

---

## –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è: –î–æ —Ç–∞ –ü—ñ—Å–ª—è

### –î–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å:
- ‚ùå –†–æ–∑—Ä–∏–≤–∏ —Ç–∞ —â—ñ–ª–∏–Ω–∏ –≤ –¥–æ—Ä–æ–≥–∞—Ö —á–µ—Ä–µ–∑ `adaptive_embed`
- ‚ùå –ß–æ—Ä–Ω—ñ –±–ª–æ–∫–∏ –Ω–∞ –ø–µ—Ä–µ—Ö—Ä–µ—Å—Ç—è—Ö (–æ–ø–æ—Ä–∏ –º–æ—Å—Ç—ñ–≤)
- ‚ùå "–†–≤–∞–Ω—ñ" –∫—Ä–∞—ó –¥–æ—Ä—ñ–≥
- ‚ùå –ú–æ–∂–ª–∏–≤–∏–π z-fighting –∑ —Ç—Ä–∞–≤–æ—é

### –ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å:
- ‚úÖ –¶—ñ–ª—å–Ω—ñ –¥–æ—Ä–æ–≥–∏ –±–µ–∑ —Ä–æ–∑—Ä–∏–≤—ñ–≤ (`stable_embed`)
- ‚úÖ –ß–∏—Å—Ç—ñ –ø–µ—Ä–µ—Ö—Ä–µ—Å—Ç—è –±–µ–∑ —á–æ—Ä–Ω–∏—Ö –±–ª–æ–∫—ñ–≤ (–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∏—Å–æ—Ç–∏ –æ–ø–æ—Ä)
- ‚úÖ –†—ñ–≤–Ω—ñ –∫—Ä–∞—ó –¥–æ—Ä—ñ–≥
- ‚úÖ –£–Ω–∏–∫–Ω–µ–Ω–Ω—è z-fighting (`bias = 0.02–º`)
- ‚úÖ –ú–µ–Ω—à –∞–≥—Ä–µ—Å–∏–≤–Ω–∞ –¥–µ—Ç–µ–∫—Ü—ñ—è –º–æ—Å—Ç—ñ–≤ (`layer >= 2.0`)

---

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### Stable Embed vs Adaptive Embed

**Adaptive Embed (–ë–£–õ–û):**
```python
slope = max_ground_z - min_ground_z
adaptive_embed = float(re)
if slope > float(re) * 2.0:
    adaptive_embed = float(re) * (1.0 - min(0.5, (slope - float(re) * 2.0) / (slope + 1.0)))
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –†—ñ–∑–Ω—ñ —á–∞—Å—Ç–∏–Ω–∏ –¥–æ—Ä–æ–≥–∏ –º–∞—é—Ç—å —Ä—ñ–∑–Ω–µ –∑–∞–≥–ª–∏–±–ª–µ–Ω–Ω—è
- –ù–∞ —Å—Ç–∏–∫–∞—Ö –º—ñ–∂ —á–∞—Å—Ç–∏–Ω–∞–º–∏ –∑'—è–≤–ª—è—é—Ç—å—Å—è —Å—Ö–æ–¥–∏–Ω–∫–∏
- –î–æ—Ä–æ–≥–∞ —Ä–æ–∑—Ä–∏–≤–∞—î—Ç—å—Å—è –Ω–∞ —à–º–∞—Ç–∫–∏

**Stable Embed (–°–¢–ê–õ–û):**
```python
stable_embed = float(re) if float(re) > 0 else 0.1
```

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- –û–¥–Ω–∞–∫–æ–≤–µ –∑–∞–≥–ª–∏–±–ª–µ–Ω–Ω—è –¥–ª—è –≤—Å—ñ—Ö —á–∞—Å—Ç–∏–Ω –¥–æ—Ä–æ–≥–∏
- –Ü–¥–µ–∞–ª—å–Ω—ñ —Å—Ç–∏–∫–∏ –±–µ–∑ —Ä–æ–∑—Ä–∏–≤—ñ–≤
- –ü–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞

---

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∏—Å–æ—Ç–∏ –æ–ø–æ—Ä

**–ë–£–õ–û:**
```python
if support_height < min_support_height:
    support_height = max(min_support_height, 0.5)  # –°—Ç–≤–æ—Ä—é—î –æ–ø–æ—Ä—É –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –Ω–∏–∑—å–∫–∞
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –°—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –æ–ø–æ—Ä–∏ –¥–ª—è –Ω–∏–∑—å–∫–∏—Ö –º–æ—Å—Ç—ñ–≤/—Ä–∞–º–ø
- –û–ø–æ—Ä–∏ —Å—Ç–∏—Ä—á–∞—Ç—å –∫—Ä—ñ–∑—å –¥–æ—Ä–æ–≥—É
- –ß–æ—Ä–Ω—ñ –±–ª–æ–∫–∏ –Ω–∞ –ø–µ—Ä–µ—Ö—Ä–µ—Å—Ç—è—Ö

**–°–¢–ê–õ–û:**
```python
if support_height < 3.0:
    continue  # –ü—Ä–æ–ø—É—Å–∫–∞—î–º–æ –Ω–∏–∑—å–∫—ñ –æ–ø–æ—Ä–∏
```

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- –û–ø–æ—Ä–∏ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –¥–ª—è –≤–∏—Å–æ–∫–∏—Ö –º–æ—Å—Ç—ñ–≤ (‚â• 3–º)
- –ù–µ–º–∞—î —á–æ—Ä–Ω–∏—Ö –±–ª–æ–∫—ñ–≤ –Ω–∞ –ø–µ—Ä–µ—Ö—Ä–µ—Å—Ç—è—Ö
- –ß–∏—Å—Ç—ñ—à–∏–π –≤–∏–≥–ª—è–¥ –º–æ–¥–µ–ª—ñ

---

### –î–µ—Ç–µ–∫—Ü—ñ—è –º–æ—Å—Ç—ñ–≤

**–ë–£–õ–û:**
```python
if layer is not None and layer >= 1.0:
    is_bridge = True
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü–µ—Ä–µ—Ö—Ä–µ—Å—Ç—è –∑ `layer=1` –≤–≤–∞–∂–∞—é—Ç—å—Å—è –º–æ—Å—Ç–∞–º–∏
- –°—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –æ–ø–æ—Ä–∏ –¥–ª—è –ø–µ—Ä–µ—Ö—Ä–µ—Å—Ç—å
- –ß–æ—Ä–Ω—ñ –±–ª–æ–∫–∏ –Ω–∞ –¥–æ—Ä–æ–≥–∞—Ö

**–°–¢–ê–õ–û:**
```python
if layer is not None and layer >= 2.0:
    is_bridge = True
```

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- –¢—ñ–ª—å–∫–∏ —Å–ø—Ä–∞–≤–∂–Ω—ñ –≤—ñ–∞–¥—É–∫–∏ (`layer >= 2`) –≤–≤–∞–∂–∞—é—Ç—å—Å—è –º–æ—Å—Ç–∞–º–∏
- –ü–µ—Ä–µ—Ö—Ä–µ—Å—Ç—è –Ω–µ –≤–≤–∞–∂–∞—é—Ç—å—Å—è –º–æ—Å—Ç–∞–º–∏
- –ú–µ–Ω—à–µ –ø–æ–º–∏–ª–∫–æ–≤–∏—Ö –æ–ø–æ—Ä

---

### Z-Fighting Bias

**–î–æ–¥–∞–Ω–æ:**
```python
bias = 0.02  # 2 —Å–º –¥–ª—è —É–Ω–∏–∫–Ω–µ–Ω–Ω—è z-fighting
road_z = ground_z_values + old_z - stable_embed + bias
```

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- –î–æ—Ä–æ–≥–∏ –∑–∞–≤–∂–¥–∏ —Ç—Ä–æ—Ö–∏ –≤–∏—â—ñ –∑–∞ –∑–µ–º–ª—é
- –£–Ω–∏–∫–∞—î–º–æ z-fighting –Ω–∞ —Å—Ç–∏–∫—É –∑ —Ç—Ä–∞–≤–æ—é
- –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π offset (2—Å–º) –Ω–µ –≤–∏–¥–Ω–æ –Ω–∞ –º–æ–¥–µ–ª—ñ

---

## –ü–æ—Ä—è–¥–æ–∫ –æ–ø–µ—Ä–∞—Ü—ñ–π (—Ñ—ñ–Ω–∞–ª—å–Ω–∏–π)

1. **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –±—É—Ñ–µ—Ä—ñ–≤ –¥–æ—Ä—ñ–≥** (–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ —à–∏—Ä–∏–Ω–∞–º–∏)
2. **–í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –º–æ—Å—Ç—ñ–≤** (–º–µ–Ω—à –∞–≥—Ä–µ—Å–∏–≤–Ω–∞ –¥–µ—Ç–µ–∫—Ü—ñ—è: `layer >= 2.0`)
3. **–†–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –Ω–∞ —á–∞—Å—Ç–∏–Ω–∏** (–º–æ—Å—Ç–∏ —Ç–∞ –∑–≤–∏—á–∞–π–Ω—ñ –¥–æ—Ä–æ–≥–∏)
4. **–û–±—Ä–æ–±–∫–∞ –∫–æ–∂–Ω–æ—ó —á–∞—Å—Ç–∏–Ω–∏:**
   - **–ú–æ—Å—Ç–∏:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å `stable_embed` –¥–ª—è `base_nonbridge`
   - **–ó–≤–∏—á–∞–π–Ω—ñ –¥–æ—Ä–æ–≥–∏:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å `stable_embed + bias` –¥–ª—è —É–Ω–∏–∫–Ω–µ–Ω–Ω—è z-fighting
5. **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–ø–æ—Ä –º–æ—Å—Ç—ñ–≤** (—Ç—ñ–ª—å–∫–∏ –¥–ª—è –≤–∏—Å–æ–∫–∏—Ö –º–æ—Å—Ç—ñ–≤: `support_height >= 3.0–º`)
6. **–û–±'—î–¥–Ω–∞–Ω–Ω—è –º–µ—à—ñ–≤**

---

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ—Ä–µ–∫—Ç–Ω–æ—Å—Ç—ñ

### ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ 1: –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —Ä–æ–∑—Ä–∏–≤—ñ–≤

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –î–æ—Ä–æ–≥–∏ –≤–∏–≥–ª—è–¥–∞—é—Ç—å —è–∫ —Ü—ñ–ª—å–Ω—ñ —Å—Ç—Ä—ñ—á–∫–∏
- –ù–µ–º–∞—î —Å—Ö–æ–¥–∏–Ω–æ–∫ –Ω–∞ —Å—Ç–∏–∫–∞—Ö –º—ñ–∂ —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏
- –ü–ª–∞–≤–Ω—ñ –ø–µ—Ä–µ—Ö–æ–¥–∏ –º—ñ–∂ —á–∞—Å—Ç–∏–Ω–∞–º–∏ –¥–æ—Ä–æ–≥–∏

**–Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏:**
- –ü–æ–¥–∏–≤–∏—Ç–∏—Å—è –Ω–∞ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—É –º–æ–¥–µ–ª—å
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∏–∫–∏ –º—ñ–∂ —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏ –¥–æ—Ä–æ–≥–∏
- –ù–µ–º–∞—î –≤–∏–¥–∏–º–∏—Ö —Ä–æ–∑—Ä–∏–≤—ñ–≤ –∞–±–æ —â—ñ–ª–∏–Ω

### ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ 2: –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —á–æ—Ä–Ω–∏—Ö –±–ª–æ–∫—ñ–≤

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ù–µ–º–∞—î —á–æ—Ä–Ω–∏—Ö –ø–∞—Ä–∞–ª–µ–ª–µ–ø—ñ–ø–µ–¥—ñ–≤ –Ω–∞ –ø–µ—Ä–µ—Ö—Ä–µ—Å—Ç—è—Ö
- –û–ø–æ—Ä–∏ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –¥–ª—è –≤–∏—Å–æ–∫–∏—Ö –º–æ—Å—Ç—ñ–≤
- –ß–∏—Å—Ç—ñ –ø–µ—Ä–µ—Ö—Ä–µ—Å—Ç—è

**–Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏:**
- –ü–æ–¥–∏–≤–∏—Ç–∏—Å—è –Ω–∞ –ø–µ—Ä–µ—Ö—Ä–µ—Å—Ç—è –≤ –º–æ–¥–µ–ª—ñ
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –Ω–µ–º–∞—î –æ–ø–æ—Ä –Ω–∞ –Ω–∏–∑—å–∫–∏—Ö –º–æ—Å—Ç–∞—Ö/—Ä–∞–º–ø–∞—Ö
- –ù–µ–º–∞—î —á–æ—Ä–Ω–∏—Ö –±–ª–æ–∫—ñ–≤ –Ω–∞ –¥–æ—Ä–æ–≥–∞—Ö

### ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ 3: –†—ñ–≤–Ω—ñ –∫—Ä–∞—ó

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ö—Ä–∞—ó –¥–æ—Ä—ñ–≥ –≤–∏–≥–ª—è–¥–∞—é—Ç—å —Ä—ñ–≤–Ω–∏–º–∏
- –ù–µ–º–∞—î –≥–æ—Å—Ç—Ä–∏—Ö –∫—É—Ç—ñ–≤ –Ω–∞ —Å—Ç–∏–∫–∞—Ö
- –ü–ª–∞–≤–Ω—ñ –ø–µ—Ä–µ—Ö–æ–¥–∏

**–Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏:**
- –ü–æ–¥–∏–≤–∏—Ç–∏—Å—è –Ω–∞ –∫—Ä–∞—ó –¥–æ—Ä—ñ–≥ –≤ –º–æ–¥–µ–ª—ñ
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∏–∫–∏ –º—ñ–∂ —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏
- –ù–µ–º–∞—î "—Ä–≤–∞–Ω–∏—Ö" –∫—Ä–∞—ó–≤

### ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ 4: –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å z-fighting

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –î–æ—Ä–æ–≥–∏ —Ç—Ä–æ—Ö–∏ –≤–∏—â—ñ –∑–∞ –∑–µ–º–ª—é (2—Å–º)
- –ù–µ–º–∞—î –º—ñ–∫—Ä–æ-—â—ñ–ª–∏–Ω –Ω–∞ —Å—Ç–∏–∫—É –∑ —Ç—Ä–∞–≤–æ—é
- –ß–∏—Å—Ç–∏–π —Å—Ç–∏–∫ –º—ñ–∂ –¥–æ—Ä–æ–≥–∞–º–∏ —Ç–∞ –ø–∞—Ä–∫–∞–º–∏

**–Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏:**
- –ü–æ–¥–∏–≤–∏—Ç–∏—Å—è –Ω–∞ —Å—Ç–∏–∫–∏ –º—ñ–∂ –¥–æ—Ä–æ–≥–∞–º–∏ —Ç–∞ —Ç—Ä–∞–≤–æ—é
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –Ω–µ–º–∞—î –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ñ–≤ –Ω–∞ —Å—Ç–∏–∫—É
- –ù–∞ 3D –¥—Ä—É–∫—É –Ω–µ –º–∞—î –±—É—Ç–∏ z-fighting

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ—ó –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó

### –Ø–∫—â–æ –≤—Å–µ —â–µ —î —Ä–æ–∑—Ä–∏–≤–∏:

1. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `road_embed`:**
   - –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ `road_embed` –æ–¥–Ω–∞–∫–æ–≤–∏–π –¥–ª—è –≤—Å—ñ—Ö —á–∞—Å—Ç–∏–Ω –¥–æ—Ä–æ–≥–∏
   - –Ø–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Ä—ñ–∑–Ω–∏–π `road_embed` –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤ –¥–æ—Ä—ñ–≥, —Ü–µ –º–æ–∂–µ —Å–ø—Ä–∏—á–∏–Ω–∏—Ç–∏ —Ä–æ–∑—Ä–∏–≤–∏

2. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `bridge_height_multiplier`:**
   - –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –º–Ω–æ–∂–Ω–∏–∫ –æ–¥–Ω–∞–∫–æ–≤–∏–π –¥–ª—è –≤—Å—ñ—Ö –º–æ—Å—Ç—ñ–≤
   - –†—ñ–∑–Ω—ñ –º–Ω–æ–∂–Ω–∏–∫–∏ –º–æ–∂—É—Ç—å —Å–ø—Ä–∏—á–∏–Ω–∏—Ç–∏ —Ä—ñ–∑–Ω—ñ –≤–∏—Å–æ—Ç–∏ –Ω–∞ —Å—Ç–∏–∫–∞—Ö

### –Ø–∫—â–æ –≤—Å–µ —â–µ —î —á–æ—Ä–Ω—ñ –±–ª–æ–∫–∏:

1. **–ó–±—ñ–ª—å—à–∏—Ç–∏ –º—ñ–Ω—ñ–º–∞–ª—å–Ω—É –≤–∏—Å–æ—Ç—É –æ–ø–æ—Ä:**
   ```python
   if support_height < 4.0:  # –ó–∞–º—ñ—Å—Ç—å 3.0
       continue
   ```

2. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –¥–µ—Ç–µ–∫—Ü—ñ—é –º–æ—Å—Ç—ñ–≤:**
   - –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ `layer >= 2.0` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–∞—Ü—é—î
   - –ú–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –¥–ª—è –ø–µ—Ä–µ—Ö—Ä–µ—Å—Ç—å

### –Ø–∫—â–æ –≤—Å–µ —â–µ —î z-fighting:

1. **–ó–±—ñ–ª—å—à–∏—Ç–∏ bias:**
   ```python
   bias = 0.05  # 5 —Å–º –∑–∞–º—ñ—Å—Ç—å 2 —Å–º
   ```

2. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `parks_height_mm`:**
   - –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –ø–∞—Ä–∫–∏ –º–∞—é—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É –≤–∏—Å–æ—Ç—É
   - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–∞—Ü—é—î –≤–∏—Ä—ñ–∑–∞–Ω–Ω—è –¥–æ—Ä—ñ–≥ –∑ –ø–∞—Ä–∫—ñ–≤

---

## –ü—ñ–¥—Å—É–º–æ–∫ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å

### –ö–ª—é—á–æ–≤—ñ –∑–º—ñ–Ω–∏:

1. **–ó–∞–º—ñ–Ω–∞ `adaptive_embed` –Ω–∞ `stable_embed`:**
   - –£—Å—É–Ω–µ–Ω–Ω—è —Ä–æ–∑—Ä–∏–≤—ñ–≤ —É –¥–æ—Ä–æ–≥–∞—Ö
   - –Ü–¥–µ–∞–ª—å–Ω—ñ —Å—Ç–∏–∫–∏ –º—ñ–∂ —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏

2. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∏—Å–æ—Ç–∏ –æ–ø–æ—Ä (`support_height < 3.0`):**
   - –£—Å—É–Ω–µ–Ω–Ω—è —á–æ—Ä–Ω–∏—Ö –±–ª–æ–∫—ñ–≤ –Ω–∞ –ø–µ—Ä–µ—Ö—Ä–µ—Å—Ç—è—Ö
   - –û–ø–æ—Ä–∏ —Ç—ñ–ª—å–∫–∏ –¥–ª—è –≤–∏—Å–æ–∫–∏—Ö –º–æ—Å—Ç—ñ–≤

3. **–ú–µ–Ω—à –∞–≥—Ä–µ—Å–∏–≤–Ω–∞ –¥–µ—Ç–µ–∫—Ü—ñ—è –º–æ—Å—Ç—ñ–≤ (`layer >= 2.0`):**
   - –ü–µ—Ä–µ—Ö—Ä–µ—Å—Ç—è –Ω–µ –≤–≤–∞–∂–∞—é—Ç—å—Å—è –º–æ—Å—Ç–∞–º–∏
   - –ú–µ–Ω—à–µ –ø–æ–º–∏–ª–∫–æ–≤–∏—Ö –æ–ø–æ—Ä

4. **–î–æ–¥–∞–≤–∞–Ω–Ω—è `bias = 0.02–º`:**
   - –£–Ω–∏–∫–Ω–µ–Ω–Ω—è z-fighting –Ω–∞ —Å—Ç–∏–∫—É –∑ —Ç—Ä–∞–≤–æ—é
   - –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π offset –¥–ª—è —á–∏—Å—Ç–∏—Ö —Å—Ç–∏–∫—ñ–≤

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å—Ç–≤–æ—Ä–µ–Ω–æ –ø—ñ—Å–ª—è –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å –æ–±—Ä–æ–±–∫–∏ –¥–æ—Ä—ñ–≥*

