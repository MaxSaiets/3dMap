# –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Ñ–∞–π–ª–∏ road_processor

## –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω —Ñ–∞–π–ª—ñ–≤

–£ –ø—Ä–æ–µ–∫—Ç—ñ —î —Ç—Ä–∏ —Ñ–∞–π–ª–∏ –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –¥–æ—Ä—ñ–≥:

### 1. `road_processor.py` ‚úÖ **–í–ò–ö–û–†–ò–°–¢–û–í–£–Ñ–¢–¨–°–Ø**
- **–°—Ç–∞—Ç—É—Å**: –ê–∫—Ç–∏–≤–Ω–∏–π, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ `main.py`
- **–Ü–º–ø–æ—Ä—Ç**: `from services.road_processor import process_roads, build_road_polygons`
- **–û–ø–∏—Å**: –ü–æ—Ç–æ—á–Ω–∞ –≤–µ—Ä—Å—ñ—è –∑ —É—Å—ñ–º–∞ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è–º–∏ —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è–º–∏
- **–†–æ–∑–º—ñ—Ä**: ~985 —Ä—è–¥–∫—ñ–≤

### 2. `road_processor_new.py` ‚ö†Ô∏è **–ù–ï –í–ò–ö–û–†–ò–°–¢–û–í–£–Ñ–¢–¨–°–Ø**
- **–°—Ç–∞—Ç—É—Å**: –ù–æ–≤–∞ –≤–µ—Ä—Å—ñ—è (–º–æ–∂–ª–∏–≤–æ, —Ç–µ—Å—Ç–æ–≤–∞ –∞–±–æ –≤ —Ä–æ–∑—Ä–æ–±—Ü—ñ)
- **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**: –ù–µ —ñ–º–ø–æ—Ä—Ç—É—î—Ç—å—Å—è –Ω—ñ–¥–µ –≤ –∫–æ–¥—ñ
- **–û–ø–∏—Å**: –°–ø—Ä–æ—â–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è (~392 —Ä—è–¥–∫–∏), –º–æ–∂–ª–∏–≤–æ, –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–∞
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è**: –ú–æ–∂–Ω–∞ –≤–∏–¥–∞–ª–∏—Ç–∏ –∞–±–æ –∑–∞–ª–∏—à–∏—Ç–∏ –¥–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è

### 3. `road_processor_old.py` üì¶ **BACKUP**
- **–°—Ç–∞—Ç—É—Å**: –°—Ç–∞—Ä–∞ –≤–µ—Ä—Å—ñ—è (–±–µ–∫–∞–ø)
- **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**: –ù–µ —ñ–º–ø–æ—Ä—Ç—É—î—Ç—å—Å—è –Ω—ñ–¥–µ –≤ –∫–æ–¥—ñ
- **–û–ø–∏—Å**: –ü–æ–ø–µ—Ä–µ–¥–Ω—è –≤–µ—Ä—Å—ñ—è –∑ —É—Å—ñ—î—é —ñ—Å—Ç–æ—Ä—ñ—î—é –∑–º—ñ–Ω (~1071 —Ä—è–¥–æ–∫)
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è**: –ú–æ–∂–Ω–∞ –≤–∏–¥–∞–ª–∏—Ç–∏, —è–∫—â–æ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

1. **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏**: `road_processor.py` - —Ü–µ –ø–æ—Ç–æ—á–Ω–∏–π –∞–∫—Ç–∏–≤–Ω–∏–π —Ñ–∞–π–ª
2. **–ú–æ–∂–Ω–∞ –≤–∏–¥–∞–ª–∏—Ç–∏**: 
   - `road_processor_new.py` - —è–∫—â–æ –Ω–µ –ø–ª–∞–Ω—É—î—Ç—å—Å—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
   - `road_processor_old.py` - —è–∫—â–æ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è (–∞–ª–µ –∫—Ä–∞—â–µ –∑–∞–ª–∏—à–∏—Ç–∏ –¥–ª—è –±–µ–∑–ø–µ–∫–∏)

## –Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —è–∫–∏–π —Ñ–∞–π–ª –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è

```bash
# –ü–æ—à—É–∫ —ñ–º–ø–æ—Ä—Ç—ñ–≤
grep -r "from.*road_processor" H:\3dMap\backend\main.py
# –†–µ–∑—É–ª—å—Ç–∞—Ç: from services.road_processor import process_roads, build_road_polygons

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —à–ª—è—Ö—É
python -c "from services.road_processor import process_roads; print(process_roads.__module__)"
# –†–µ–∑—É–ª—å—Ç–∞—Ç: services.road_processor (—Ç–æ–±—Ç–æ road_processor.py)
```

## –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –Ω–æ–≤—É –≤–µ—Ä—Å—ñ—é

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `road_processor_new.py`:

1. –ü–µ—Ä–µ–π–º–µ–Ω—É–≤–∞—Ç–∏ —Ñ–∞–π–ª–∏:
   ```bash
   mv road_processor.py road_processor_current.py
   mv road_processor_new.py road_processor.py
   ```

2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ –≤—Å–µ –ø—Ä–∞—Ü—é—î:
   ```bash
   python -m py_compile services/road_processor.py
   python -c "from services.road_processor import process_roads; print('OK')"
   ```

3. –Ø–∫—â–æ –≤—Å–µ –ø—Ä–∞—Ü—é—î, –º–æ–∂–Ω–∞ –≤–∏–¥–∞–ª–∏—Ç–∏ —Å—Ç–∞—Ä—ñ —Ñ–∞–π–ª–∏:
   ```bash
   rm road_processor_old.py
   rm road_processor_current.py
   ```

## –ü—Ä–∏–º—ñ—Ç–∫–∏

- –§–∞–π–ª–∏ `_new.py` —Ç–∞ `_old.py` –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è —ñ –Ω–µ –≤–ø–ª–∏–≤–∞—é—Ç—å –Ω–∞ —Ä–æ–±–æ—Ç—É —Å–∏—Å—Ç–µ–º–∏
- –í–æ–Ω–∏ –∑–∞–π–º–∞—é—Ç—å –º—ñ—Å—Ü–µ, –∞–ª–µ –Ω–µ —Å—Ç–≤–æ—Ä—é—é—Ç—å –ø—Ä–æ–±–ª–µ–º
- –†–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –≤–∏–¥–∞–ª–∏—Ç–∏ —ó—Ö –ø—ñ—Å–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏, —â–æ –≤—Å–µ –ø—Ä–∞—Ü—é—î –∑ `road_processor.py`

